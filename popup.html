<!DOCTYPE html>
<html>
  <head>
    <script src='jquery-3.1.0.slim.min.js'></script>
    <script src="bootstrap/bootstrap.min.js"></script>
    <script src='popup.js'></script>
    <link rel="stylesheet" type="text/css" href="bootstrap/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/bootstrap-theme.min.css">
    <style>
      small#help {
        cursor: pointer;
      }
      .number {
        font-weight: bold;
      }
    </style>
  </head>
  <body style="width:600px; padding:20px">
    <div id="loading-container" class="container-fluid">
      Loading...
    </div>
    <div id="setup-container" class="container-fluid">
      <h3>Setup</h3>

      <button id="choose-button" class="btn btn-success">This site</button>
      <button id="later-button" class="btn btn-text">Later</button>
    </div>
    <div id="main-container" class="container-fluid">
      <div class="row">
        <div class="col-xs-8">
          <h3>Differ <small id="help">help</small></h3>
        </div>
        <div class="col-xs-4">
          <button id="reset" style="margin-top:15px;" class="btn-small btn-danger pull-right">delete data</button>
        </div>
      </div>
      <div id="helpPanel" class="row" style="display:none">
        <div class="col-xs-12 well">
          <h4>Help me</h4>
          <p>
            This is a small extension that takes the failing tests of two different teamcity pages and performs a diff on it.
          </p>
          <p>
            <strong>Usage</strong>
            <ol>
              <li>
                Open the teamcity pages you want to compare. It will automatically collect the data upon opening.
              </li>
              <li>
                Click this popup (you already did!), and select the two branches you want to compare from the dropdowns. (If the branches aren't present, just reopen the popup.)
              </li>
              <li>
                The script will match the tests and give the differences between both branches. (Failures that exist on both are not shown.)
              </li>
            </ol>
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-6">
          <label for="compareFrom">Base</label>
          <select class="form-control" id="compareFrom"></select>
        </div>
        <div class="col-xs-6">
          <label for="compareTo">Branch</label>
          <select class="form-control" id="compareTo"></select>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <button id="diffIt" class="form-control btn btn-success">Diff it</button>
        </div>
        <div class="col-xs-12">
          <div id="sameBranch" class="alert alert-danger" style="display:none" role="alert">Branches can't be the same.</div>
        </div>
      </div>
      <div id="diffPanel" class="row" style="display:none">
        <div class="col-xs-12">
          <h4>Differences</h4>
          <p>
            <span class="number" id="totalCount"></span> differences.
            <a href="#" id="leftLink"><code id="leftBranch"></code></a> has <span class="number" id="leftCount"></span>.
            <a href="#" id="rightLink"><code id="rightBranch"></code></a> has <span class="number" id="rightCount"></span>.
          </p>
          <div id="differences">

          </div>
        </div>
      </div>
    </div>
  </body>
</html>
